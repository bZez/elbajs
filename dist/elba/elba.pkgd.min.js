/*! elba - v0.5.0 - 2016-03-04
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a){var b=window.getComputedStyle(a,null),c=b.getPropertyValue("transform")||b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform"),d=c.match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}.+))(?:, (-{0,1}.+))\))/);return d?"3d"==d[1]?d.slice(2,5):(d.push(0),d.slice(5,8)):[0,0,0]}function b(a,b){var c={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60,directionHint:"right"},d=function(a,b,c){return Object.create(C,{el:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c},slider:{writable:!0,configurable:!0,value:null},slidesMap:{writable:!0,enumerable:!0,value:{}},count:{writable:!0,value:0},source:{writable:!0,value:{}},containerWidth:{writable:!0,value:0},pointer:{writable:!0,value:0},isSettled:{writable:!0,value:!0}})},f=k.extend(c,b);if(this.instances=[],a.indexOf("#")>-1){var g=a.slice(1),h=k.generateGUID();e[h]=d(document.getElementById(g),h,f),e[h].init(),this.instances.push(h)}}var c,d,e={},f=null;window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(c="hidden",d="visibilitychange"):"undefined"!=typeof document.mozHidden?(c="mozHidden",d="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(c=" msHidden",d="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",d="webkitvisibilitychange");var g,h,i,j,k={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]},setListener:function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)},getPercentageRatio:function(a,b){var c=(a/b).toFixed(2);return 100*c}},l=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},m=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},n=function(a){return a.targetTouches?a.targetTouches[0]:a},o=function(a,b,c,d){var e=document.createEvent("Event");if(e.originalEvent=c,d=d||{},d.x=g,d.y=h,d.distance=d.distance,e.initEvent){for(var f in d)e[f]=d[f];e.initEvent(b,!0,!0),a.dispatchEvent(e)}a["on"+b]&&a["on"+b](e)},p={events:{start:l("PointerDown")+" touchstart mousedown",end:l("PointerUp")+" touchend mouseup",move:l("PointerMove")+" touchmove mousemove"},onTouchStart:function(a){var b=n(a);i=g=b.pageX,j=h=b.pageY,r++},onTouchEnd:function(a){var b=[],c=j-h,d=i-g;if(-q>=d&&(f&&f.goTo("previous"),b.push("swiperight")),d>=q&&(f&&f.goTo("next"),b.push("swipeleft")),-q>=c&&b.push("swipedown"),c>=q&&b.push("swipeup"),b.length){for(var e=0;e<b.length;e++){var k=b[e];o(a.target,k,a,{distance:{x:Math.abs(d),y:Math.abs(c)}})}r=0}f=null},onTouchMove:function(a){if(f){var b=n(a);g=b.pageX,h=b.pageY;var c=j-h,d=i-g;r>0&&(Math.abs(d)>=q||Math.abs(c)>=q)&&o(a.target,"drag",a,{delta:{x:d,y:c}})}}},q=window.SWIPE_THRESHOLD||100,r=0;k.setListener(document,p.events.start,m(p.onTouchStart,1)),k.setListener(document,p.events.end,m(p.onTouchEnd,1)),k.setListener(document,p.events.move,m(p.onTouchMove,1));var s={build:function(){this.setLayout();var a=this.getSlides();this.registerSlidesWidth(a),this.setSlidesOffset(a)}};s.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=k.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)c.appendChild(d[e]);k.removeChildren(this.el),this.el.appendChild(a)},s.setSlidesOffset=function(a){for(var b=a||this.getSlides(),c=this.getContainerWidth(),d=0,e=1;e<b.length;e++){var f=k.getPercentageRatio(k.intVal(this.slidesMap[e-1].width),c);b[e].style.left=f+d+"%",d+=f}},s.setNavigation=function(){this.setArrow("right"),this.setArrow("left")},s.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow","left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)},s.registerSlidesWidth=function(a){for(var b=a||this.getSlides(),c=0;c<b.length;c++)"undefined"==typeof this.slidesMap[c]&&(this.slidesMap[c]={}),this.slidesMap[c].width=window.getComputedStyle(b[c]).getPropertyValue("width")};var t=document.createElement("div"),u=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==t.style[a[b]])return a[b];return!1}(),v=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==t.style[a[b]])return a[b];return!1}();t=null;var w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,x=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,Object.create(s));x.goToNext=function(){this.pointer+=1;var a=-k.intVal(this.slidesMap[this.pointer].width);this.slide(a)},x.goToPrevious=function(){this.slide(this.slidesMap[this.pointer].width)},x.goTo=function(a){"next"===a?this.goToNext():"previous"===a&&this.goToPrevious()},x.slide=function(b){var c=this.getSlider(),d=k.intVal(a(c)[0]),e=k.getPercentageRatio(b+d,this.getContainerWidth());console.log(e),w(function(){c.style[v]=u+" 0.8s",c.style[u]="translate3d("+e+"%,0,0)"})};var y=Object.create(x);y.loadImages=function(){return console.log(this.el),this};var z=function(a){classie.hasClass(a.target,"elba-right-nav")?this.goTo("next"):this.goTo("previous")},A=function(a){null===f&&(f=e[this.GUID])},B=Object.create(y);B.initEvents=function(){this.settings.navigation&&this.setArrowsListener(),this.setSliderListener()},B.setArrowsListener=function(){for(var a=k.makeArray(this.getArrows()),b=0;a[b];)a[b].addEventListener("click",z.bind(this)),b++},B.setSliderListener=function(){var a=this.getSlider();k.setListener(a,p.events.start,A.bind(this))};var C=Object.create(B);return C.init=function(){this.build(),this.count=this.getSlidesCount(),this.containerWidth=this.getContainerWidth(),this.settings.navigation&&this.count>1&&this.setNavigation(),console.log(this.slidesMap),this.initEvents()},C.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},C.getSlides=function(){return this.el.querySelectorAll(".elba")},C.getArrows=function(){return this.el.querySelectorAll(".elba-arrow")},C.getSlidesCount=function(){return this.count?this.count:this.count=this.getSlides().length},C.getContainerWidth=function(){return this.containerWidth?this.containerWidth:this.containerWidth=this.el.clientWidth},b});