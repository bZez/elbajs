/*! elba - v0.5.0 - 2016-02-29
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a,b){var c={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60},e=function(a,b,c){return Object.create(K,{el:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c}})},f=m.extend(c,b);if(this.instances=[],a.indexOf("#")>-1){var g=a.slice(1),h=m.generateGUID();d[h]=e(document.getElementById(g),h,f),d[h].init(),this.instances.push(h)}}var b,c,d={};window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(b="hidden",c="visibilitychange"):"undefined"!=typeof document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(b=" msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange");var e,f,g,h,i,j,k,l,m={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]},setListener:function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)}},n=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},o=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},p=function(a){return a.targetTouches?a.targetTouches[0]:a},q=function(){return(new Date).getTime()},r=function(a,b,c,d){var g=document.createEvent("Event");if(g.originalEvent=c,d=d||{},d.x=e,d.y=f,d.distance=d.distance,g.initEvent){for(var h in d)g[h]=d[h];g.initEvent(b,!0,!0),a.dispatchEvent(g)}a["on"+b]&&a["on"+b](g)},s=null,t={events:{start:n("PointerDown")+" touchstart mousedown",end:n("PointerUp")+" touchend mouseup",move:n("PointerMove")+" touchmove mousemove"},onTouchStart:function(a){var b=p(a);g=e=b.pageX,h=f=b.pageY,l=setTimeout(function(){r(a.target,"longtap",a),j=a.target},x),i=q(),z++},onTouchEnd:function(a){var b=[],c=q(),d=h-f,m=g-e;if(clearTimeout(k),clearTimeout(l),-u>=m&&(s&&s.goTo("previous"),b.push("swiperight")),m>=u&&(s&&s.goTo("next"),b.push("swipeleft")),-u>=d&&b.push("swipedown"),d>=u&&b.push("swipeup"),b.length){for(var n=0;n<b.length;n++){var o=b[n];r(a.target,o,a,{distance:{x:Math.abs(m),y:Math.abs(d)}})}z=0}else g>=e-y&&e+y>=g&&h>=f-y&&f+y>=h&&i+v-c>=0&&(r(a.target,z>=2&&j===a.target?"dbltap":"tap",a),j=a.target),k=setTimeout(function(){z=0},w);s=null},onTouchMove:function(a){var b=p(a);e=b.pageX,f=b.pageY;var c=h-f,d=g-e;z>0&&(Math.abs(d)>=u||Math.abs(c)>=u)&&r(a.target,"drag",a,{delta:{x:d,y:c}})}},u=window.SWIPE_THRESHOLD||100,v=window.TAP_THRESHOLD||150,w=window.DBL_TAP_THRESHOLD||200,x=window.LONG_TAP_THRESHOLD||1e3,y=window.TAP_PRECISION/2||30,z=(window.JUST_ON_TOUCH_DEVICES,0);m.setListener(document,t.events.start,o(t.onTouchStart,1)),m.setListener(document,t.events.end,o(t.onTouchEnd,1)),m.setListener(document,t.events.move,o(t.onTouchMove,1));var A={build:function(){this.setLayout(),this.count=this.getSlidesLength(),this.setNavigation()}};A.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=m.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)d[e].setAttribute("data-elba-id",this.GUID),c.appendChild(d[e]);m.removeChildren(this.el),this.setSlidesOffset(d),this.el.appendChild(a)},A.setSlidesOffset=function(a){for(var b=0,c=0;c<a.length;c++)a[c].style.left=b+"%",b+=100},A.setNavigation=function(){this.settings.navigation&&this.count>1&&(this.setArrow("right"),this.setArrow("left"))},A.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow","left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)};var B=document.createElement("div"),C=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==B.style[a[b]])return a[b];return!1}(),D=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==B.style[a[b]])return a[b];return!1}();B=null;var E=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,F=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,Object.create(A));F.goToNext=function(){var a=100*(-this.pointer-1);if(this.pointer+=1,this.pointer>=this.count-1){console.log(this.pointer),console.log((this.pointer+1)%this.getSlidesLength());var b=m.getNodeElementByIndex(this.getSlides(),(this.pointer+1)%this.getSlidesLength());b.style.left=100*(this.pointer+1)+"%"}this.slide(a)},F.goToPrevious=function(){var a=100*-(this.pointer-1);this.pointer-=1,this.slide(a)},F.goTo=function(a){"next"===a?this.goToNext():"previous"===a&&this.goToPrevious()},F.slide=function(a){var b=this.getSlider();E(function(){b.style[D]=C+" 0.8s",b.style[C]="translate3d("+a+"%,0,0)"})};var G=Object.create(F);G.loadImages=function(){return console.log(this.el),this};var H=function(a){classie.hasClass(a.target,"elba-right-nav")?this.goTo("next"):this.goTo("previous")},I=function(a){console.log(d)},J=Object.create(G);J.initEvents=function(){this.settings.navigation&&this.setArrowsListener(),this.setSliderListener()},J.setArrowsListener=function(){for(var a=m.makeArray(this.getArrows()),b=0;a[b];)a[b].addEventListener("click",H.bind(this)),b++},J.setSliderListener=function(){var a=this.getSlider();m.setListener(a,t.events.start,I.bind(this))};var K=Object.create(J);return K.slider=null,K.slidesLength=null,K.count=0,K.source=0,K.pointer=0,K.directionHint="right",K.resizeTimeout=null,K.isSettled=!0,K.init=function(){this.build(),this.initEvents()},K.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},K.getSlides=function(){return this.el.querySelectorAll(".elba")},K.getArrows=function(){return this.el.querySelectorAll(".elba-arrow")},K.getSlidesLength=function(){return this.slidesLength?this.slidesLength:this.slidesLength=this.getSlides().length},a});