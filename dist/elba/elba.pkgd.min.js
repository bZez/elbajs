/*! elba - v0.5.0 - 2016-02-28
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a,b,c){this.el=a,this.settings=c,this.slider=null,this.slidesLength=null,this.GUID=b,this.count=0,this.source=0,this.pointer=0,this.directionHint="right",this.resizeTimeout=null,this.animated=!1;try{if("undefined"==typeof a)throw new Error("The first argument passed to the constructor is undefined");this.build()}catch(d){console.error(d.message)}}var b,c,d={};window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(b="hidden",c="visibilitychange"):"undefined"!=typeof document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(b=" msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange");var e,f,g,h,i,j,k,l,m={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]}},n=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},o=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},p={touchstart:n("PointerDown")+" touchstart",touchend:n("PointerUp")+" touchend",touchmove:n("PointerMove")+" touchmove"},q=function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)},r=function(a){return a.targetTouches?a.targetTouches[0]:a},s=function(){return(new Date).getTime()},t=function(a,b,c,d){var g=document.createEvent("Event");if(g.originalEvent=c,d=d||{},d.x=e,d.y=f,d.distance=d.distance,g.initEvent){for(var h in d)g[h]=d[h];g.initEvent(b,!0,!0),a.dispatchEvent(g)}a["on"+b]&&a["on"+b](g)},u=null,v={onTouchStart:function(a){var b=r(a);m.selectorMatches(b.target,"a.elba-arrow")?(u=d[b.target.getAttribute("data-elba-id")],classie.hasClass(b.target,"elba-right-nav")?u.goTo("next"):u.goTo("previous")):m.selectorMatches(b.target,".elba")?u=d[b.target.getAttribute("data-elba-id")]:m.selectorMatches(b.target.parentNode,".elba")&&(u=d[b.target.parentNode.getAttribute("data-elba-id")]),g=e=b.pageX,h=f=b.pageY,l=setTimeout(function(){t(a.target,"longtap",a),j=a.target},z),i=s(),C++},onTouchEnd:function(a){var b=[],c=s(),d=h-f,m=g-e;if(clearTimeout(k),clearTimeout(l),-w>=m&&(u&&u.goTo("previous"),b.push("swiperight")),m>=w&&(u&&u.goTo("next"),b.push("swipeleft")),-w>=d&&b.push("swipedown"),d>=w&&b.push("swipeup"),b.length){for(var n=0;n<b.length;n++){var o=b[n];t(a.target,o,a,{distance:{x:Math.abs(m),y:Math.abs(d)}})}C=0}else g>=e-A&&e+A>=g&&h>=f-A&&f+A>=h&&i+x-c>=0&&(t(a.target,C>=2&&j===a.target?"dbltap":"tap",a),j=a.target),k=setTimeout(function(){C=0},y);u=null},onTouchMove:function(a){var b=r(a);e=b.pageX,f=b.pageY;var c=h-f,d=g-e;C>0&&(Math.abs(d)>=w||Math.abs(c)>=w)&&t(a.target,"drag",a,{delta:{x:d,y:c}})}},w=window.SWIPE_THRESHOLD||100,x=window.TAP_THRESHOLD||150,y=window.DBL_TAP_THRESHOLD||200,z=window.LONG_TAP_THRESHOLD||1e3,A=window.TAP_PRECISION/2||30,B=window.JUST_ON_TOUCH_DEVICES,C=0;q(document,p.touchstart+(B?"":" mousedown"),o(v.onTouchStart,1)),q(document,p.touchend+(B?"":" mouseup"),o(v.onTouchEnd,1)),q(document,p.touchmove+(B?"":" mousemove"),o(v.onTouchMove,1)),a.prototype.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},a.prototype.getSlides=function(){return this.el.querySelectorAll(".elba")},a.prototype.getSlidesLength=function(){return this.slidesLength?this.slidesLength:this.getSlides().length};var D=document.createElement("div"),E=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==D.style[a[b]])return a[b];return!1}(),F=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==D.style[a[b]])return a[b];return!1}(),G=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame||window.mozCancelAnimationFrame;a.prototype.goToNext=function(){var a=100*(-this.pointer-1);if(this.pointer+=1,console.log(this.pointer%this.getSlidesLength()),console.log(this.pointer),this.pointer===this.getSlidesLength()-1){var b=m.getNodeElementByIndex(this.getSlides(),0);b.style.left=100*(this.pointer+1)+"%"}this.slide(a)},a.prototype.goToPrevious=function(){var a=100*-(this.pointer-1);this.pointer-=1,this.slide(a)},a.prototype.slide=function(a){var b=this.getSlider();G(function(){b.style[F]=E+" 0.8s",b.style[E]="translate3d("+a+"%,0,0)"})},a.prototype.build=function(){this.setLayout(),this.count=this.getSlidesLength(),this.setNavigation()},a.prototype.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=m.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)d[e].setAttribute("data-elba-id",this.GUID),c.appendChild(d[e]);m.removeChildren(this.el),this.setSlidesOffset(d),this.el.appendChild(a)},a.prototype.setSlidesOffset=function(a){for(var b=0,c=0;c<a.length;c++)a[c].style.left=b+"%",b+=100},a.prototype.setNavigation=function(){this.settings.navigation&&this.count>1&&(this.setArrow("right"),this.setArrow("left"))},a.prototype.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow",c.setAttribute("data-elba-id",this.GUID),"left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)},a.prototype.loadImages=function(){return console.log(this.el),this},a.prototype.goTo=function(a){"next"===a?this.goToNext():"previous"===a&&this.goToPrevious()};var H={},I=function(){var b={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60},c=function(b,c,d){return new a(b,c,d)};return{init:function(a,e){var f=m.extend(b,e),g=Object.create(H,{instances:{enumerable:!0,configurable:!1,writable:!0,value:[]}});if(a.indexOf("#")>-1){var h=a.slice(1),i=m.generateGUID();d[i]=c(document.getElementById(h),i,f),g.instances.push(i)}return g}}}();return I});