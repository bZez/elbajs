/*! elba - v0.5.0 - 2016-03-02
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a,b){var c={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60,directionHint:"right"},e=function(a,b,c){return Object.create(B,{el:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c},slider:{writable:!0,configurable:!0,value:null},slidesMap:{writable:!0,enumerable:!0,value:{}},count:{writable:!0,value:0},source:{writable:!0,value:{}},containerWidth:{writable:!0,value:0},pointer:{writable:!0,value:0},isSettled:{writable:!0,value:!0}})},f=j.extend(c,b);if(this.instances=[],a.indexOf("#")>-1){var g=a.slice(1),h=j.generateGUID();d[h]=e(document.getElementById(g),h,f),d[h].init(),this.instances.push(h)}}var b,c,d={},e=null;window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(b="hidden",c="visibilitychange"):"undefined"!=typeof document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(b=" msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange");var f,g,h,i,j={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]},setListener:function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)}},k=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},l=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},m=function(a){return a.targetTouches?a.targetTouches[0]:a},n=function(a,b,c,d){var e=document.createEvent("Event");if(e.originalEvent=c,d=d||{},d.x=f,d.y=g,d.distance=d.distance,e.initEvent){for(var h in d)e[h]=d[h];e.initEvent(b,!0,!0),a.dispatchEvent(e)}a["on"+b]&&a["on"+b](e)},o={events:{start:k("PointerDown")+" touchstart mousedown",end:k("PointerUp")+" touchend mouseup",move:k("PointerMove")+" touchmove mousemove"},onTouchStart:function(a){var b=m(a);h=f=b.pageX,i=g=b.pageY,q++},onTouchEnd:function(a){var b=[],c=i-g,d=h-f;if(-p>=d&&(e&&e.goTo("previous"),b.push("swiperight")),d>=p&&(e&&e.goTo("next"),b.push("swipeleft")),-p>=c&&b.push("swipedown"),c>=p&&b.push("swipeup"),b.length){for(var j=0;j<b.length;j++){var k=b[j];n(a.target,k,a,{distance:{x:Math.abs(d),y:Math.abs(c)}})}q=0}e=null},onTouchMove:function(a){if(e){var b=m(a);f=b.pageX,g=b.pageY;var c=i-g,d=h-f;q>0&&(Math.abs(d)>=p||Math.abs(c)>=p)&&n(a.target,"drag",a,{delta:{x:d,y:c}})}}},p=window.SWIPE_THRESHOLD||100,q=0;j.setListener(document,o.events.start,l(o.onTouchStart,1)),j.setListener(document,o.events.end,l(o.onTouchEnd,1)),j.setListener(document,o.events.move,l(o.onTouchMove,1));var r={build:function(){this.setLayout();var a=this.getSlides();this.registerSlidesWidth(a),this.setSlidesOffset(a)}};r.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=j.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)c.appendChild(d[e]);j.removeChildren(this.el),this.el.appendChild(a)},r.setSlidesOffset=function(a){for(var b=a||this.getSlides(),c=this.getContainerWidth(),d=0,e=0,f=0,g=1;g<b.length;g++)e=j.intVal(this.slidesMap[g-1].width),e=(e/c).toFixed(2),f=100*e,b[g].style.left=f+d+"%",d+=f},r.setNavigation=function(){this.setArrow("right"),this.setArrow("left")},r.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow","left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)},r.registerSlidesWidth=function(a){for(var b=a||this.getSlides(),c=0;c<b.length;c++)"undefined"==typeof this.slidesMap[c]&&(this.slidesMap[c]={}),this.slidesMap[c].width=window.getComputedStyle(b[c]).getPropertyValue("width")};var s=document.createElement("div"),t=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==s.style[a[b]])return a[b];return!1}(),u=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==s.style[a[b]])return a[b];return!1}();s=null;var v=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,w=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,Object.create(r));w.goToNext=function(){var a=100*(-this.pointer-1);if(this.pointer+=1,console.log(this.slidesMap[this.pointer].width),this.pointer>=this.count-1){var b=j.getNodeElementByIndex(this.getSlides(),(this.pointer+1)%this.getSlidesCount());b.style.left=100*(this.pointer+1)+"%"}this.slide(a)},w.goToPrevious=function(){var a=100*-(this.pointer-1);this.pointer-=1,this.slide(a)},w.goTo=function(a){"next"===a?this.goToNext():"previous"===a&&this.goToPrevious()},w.slide=function(a){var b=this.getSlider();v(function(){b.style[u]=t+" 0.8s",b.style[t]="translate3d("+a+"%,0,0)"})};var x=Object.create(w);x.loadImages=function(){return console.log(this.el),this};var y=function(a){classie.hasClass(a.target,"elba-right-nav")?this.goTo("next"):this.goTo("previous")},z=function(a){null===e&&(e=d[this.GUID])},A=Object.create(x);A.initEvents=function(){this.settings.navigation&&this.setArrowsListener(),this.setSliderListener()},A.setArrowsListener=function(){for(var a=j.makeArray(this.getArrows()),b=0;a[b];)a[b].addEventListener("click",y.bind(this)),b++},A.setSliderListener=function(){var a=this.getSlider();j.setListener(a,o.events.start,z.bind(this))};var B=Object.create(A);return B.init=function(){this.build(),this.count=this.getSlidesCount(),this.containerWidth=this.getContainerWidth(),this.settings.navigation&&this.count>1&&this.setNavigation(),console.log(this.slidesMap),this.initEvents()},B.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},B.getSlides=function(){return this.el.querySelectorAll(".elba")},B.getArrows=function(){return this.el.querySelectorAll(".elba-arrow")},B.getSlidesCount=function(){return this.count?this.count:this.count=this.getSlides().length},B.getContainerWidth=function(){return this.containerWidth?this.containerWidth:this.containerWidth=this.el.clientWidth},a});