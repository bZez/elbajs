/*! elba - v0.5.0 - 2015-12-07
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2015 ; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a){var b=window.getComputedStyle(a,null).getPropertyValue(i),c=b.match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}.+))(?:, (-{0,1}.+))\))/);return c?"3d"==c[1]?c.slice(2,5):(c.push(0),c.slice(5,8)):[0,0,0]}function b(a,b){var c={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",container:"elba-wrapper",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,dotsContainer:!1,slideshow:8e3,preload:1,swipeThreshold:60};this.settings=g.extend(c,b),this.el=a,this.slides=[],this.count=0,this.source=0,this.navigation={left:null,right:null,dots:null},this.elWidth=0,this.pointer=0,this.directionHint="right",this.resizeTimeout=null,this.animated=!1}{var c,d,e=0,f={};window.devicePixelRatio>1}"undefined"!=typeof document.hidden?(c="hidden",d="visibilitychange"):"undefined"!=typeof document.mozHidden?(c="mozHidden",d="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(c=" msHidden",d="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",d="webkitvisibilitychange");var g={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0}},h=document.createElement("div"),i=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==h.style[a[b]])return a[b];return!1}(),j=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==h.style[a[b]])return a[b];return!1}(),k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,l=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,{goToNext:function(a){this.animate(a,100)},goToPrevious:function(a){this.animate(a,-100)},animate:function(a,b){var c=this.getSlider(a);this.move(c,b)},move:function(b,c){console.log(g.intVal(a(b))),k(function(){b.style[j]=i+" 1s",b.style[i]="translate3d("+c+"%,0,0)"})}}),m=Object.create(l);m.loadImages=function(){return"ciao"};var n=Object.create(m);n.build=function(a){var b=this.setLayout(a.el);this.setSlidesOffset(b),a.count=b.length,a.pointer=1,this.setupNavigation(a,"right"),this.setupNavigation(a,"left")},n.setLayout=function(a){var b=document.createDocumentFragment(),c=document.createElement("div");c.className="elba-viewport",b.appendChild(c);var d=document.createElement("div");d.className="elba-slider",c.appendChild(d);var e=g.getCloneNodes(a.children);if(e){e.unshift(e[e.length-1].cloneNode(!0)),e.push(e[1].cloneNode(!0));for(var f=0;f<e.length;f++)d.appendChild(e[f])}return g.removeChildren(a),a.appendChild(b),e},n.setSlidesOffset=function(a){for(var b=-100,c=0;c<a.length;c++)a[c].style.left=b+"%",b+=100},n.setupNavigation=function(a,b){var c="http://www.w3.org/2000/svg",d=document.createElement("a");if(d.className="elba-"+b+"-nav",d.setAttribute("data-elba-id",a.GUID),"left"===b){var e=document.createElementNS(c,"svg");e.setAttribute("viewBox","0 0 100 100");var f=document.createElementNS(c,"path");f.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),f.setAttribute("transform","translate(15,0)"),f.setAttribute("class","elba-svg-arrow"),e.appendChild(f),d.appendChild(e)}else{var g=document.createElementNS(c,"svg");g.setAttribute("viewBox","0 0 100 100");var h=document.createElementNS(c,"path");h.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),h.setAttribute("class","elba-svg-arrow"),h.setAttribute("transform","translate(85,100) rotate(180)"),g.appendChild(h),d.appendChild(g)}a.navigation[b]=d,a.el.appendChild(a.navigation[b])};var o=Object.create(n);o.bindEvents=function(){for(var a in f)if(f.hasOwnProperty(a)){var b=f[a];b.settings.navigation&&this.addNavigationEvents(b)}},o.addNavigationEvents=function(a){a.navigation.left.addEventListener("click",function(){q.previous(a.GUID)},!1),a.navigation.right.addEventListener("click",function(){q.next(a.GUID)},!1)};var p=Object.create(o),q=Object.create(p);return q.getInstance=function(a){return f[a]},q.getSlider=function(a){return a.el.querySelector(".elba-slider")},q.init=function(a,c){if("undefined"==typeof a)throw new Error;for(var d=g.makeArray(a),h=0;h<d.length;h++){e++;var i=new b(d[h],c);d[h].setAttribute("data-elba-id",e),f[e]=i,i.GUID=e,this.build(i)}return this.bindEvents(),this},q.next=function(a){var c=this.getInstance(a)||f;if(c instanceof b)this.goToNext(c);else for(var d in c)this.goToNext(c[d])},q.previous=function(a){var c=this.getInstance(a)||f;if(c instanceof b)this.goToPrevious(c);else for(var d in c)this.goToPrevious(c[d])},q});