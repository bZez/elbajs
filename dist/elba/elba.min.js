/*! elba - v0.1.0 - 2014-10-03
* https://github.com/dedalodesign/elbajs
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a){"use strict";HTMLElement.prototype.wrap=function(a){a.length||(a=[a]);for(var b=a.length-1;b>=0;b--){var c=b>0?this.cloneNode(!0):this,d=a[b],e=d.parentNode,f=d.nextSibling;c.appendChild(d),f?e.insertBefore(c,f):e.appendChild(c)}},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=a.HTMLCollection.prototype.remove=function(){for(var a=0,b=this.length;b>a;a++)this[a]&&this[a].parentElement&&this[a].parentElement.removeChild(this[a])}}(window),function(){"use strict";Function.prototype.setScope=function(a){var b=this;return function(){b.apply(a)}}}(),function(a){"use strict";"function"==typeof define&&define.amd?define(a):window.Elba=a()}(function(){"use strict";function a(a,b){function c(a,b){return n.has(a,b)}function d(a){var b=this,e=a||b.loaderPointer,f=b.slides[e],g=b.slides.length;c(f,b.options.successClass)&&g>1&&g-1>e+1&&(e++,d.call(b,e));var h=f.getAttribute(b.source||b.options.src),i=f.querySelector(".elba-island");if(h){var j=h.split(b.options.separator),k=j[o&&j.length>1?1:0],l=new Image;l.onerror=function(){b.options.error&&b.options.error(f,"invalid"),f.className=f.className+" "+b.options.errorClass},l.onload=function(){if(i.src=k,b.setImageSize(i),n.add(f,"no-bg-img"),n.add(f,b.options.successClass),b.options.success&&b.options.success(f),g>1&&(1===e||0===e||e===g-1||e===g-2)){var a,h;a=1===e?b.slides[g-1]:e===g-1?b.slides[1]:0===e?b.slides[g-2]:b.slides[0],c(a,b.options.successClass)||(h=a.querySelector(".elba-island"),h.src=k,b.setImageSize(h),n.add(a,"no-bg-img"),n.add(a,b.options.successClass))}g>1&&g-1>e+1&&(e++,d.call(b,e))},l.src=k}else b.options.error&&b.options.error(f,"missing"),f.className=f.className+" "+b.options.errorClass}function e(){function a(){h.call(b),b._resizeTimeout=null}var b=this;b._resizeTimeout&&clearTimeout(b._resizeTimeout),b._resizeTimeout=setTimeout(a,200)}function h(){var a=this;a.setSlidesWidth(),a.goTo();var b=a.source;if(a.setSource(),b!==a.source)i.call(a),d.call(a);else for(var c=0;c<a.slides.length;c++){var e=a.slides[c];if(e){var f=e.querySelector(".elba-island");a.setImageSize(f)}}}function i(){var a=this,b=a.slides.length;a.loaderPointer=b>1?1:0;for(var c=0;b>c;c++){var d=a.slides[c];d&&(n.remove(d,"no-bg-img"),n.remove(d,a.options.successClass))}}var j=this;j.el=a,j.animated=!1,j.options=g(j.defaults,b),j.pointer=0,j.loaderPointer=0;var k=new f(j.el,j.options);if(j.slides=k.getSlides(),j.container=m(a,j.options.container),j.setSlidesWidth(),j.slides.length>1&&(j.pointer=1,j.loaderPointer=1,j.el.style.left=-j.getContainerWidth()+"px",j.options.navigation&&(l(k.getLeftNav(),"click",function(a){a.preventDefault(),j.goTo("left"),j.options.slideshow&&j.startSlideshow()}),l(k.getRightNav(),"click",function(a){a.preventDefault(),j.goTo("right"),j.options.slideshow&&j.startSlideshow()})),j.options.dots)){j.dots=k.getDots(),n.add(j.dots[j.pointer],"active-dot");for(var p=1;p<j.slides.length-1;p++)j.dots[p].setAttribute("data-target",p),l(j.dots[p],"click",function(a){a.preventDefault(),j.dotTo(this.getAttribute("data-target")),j.options.slideshow&&j.startSlideshow()})}j.setSource(),d.call(j),l(window,"resize",e.setScope(j)),j.options.slideshow&&j.startSlideshow()}function b(a){function b(a){null===s&&(s=a);var d=a-s,g=d/m;g>1&&(g=1);var n=o(g).toFixed(6);c(f,n,i,j),1==g?(g=1,h>1&&(e.pointer===h-1?(e.pointer=1,f.style.left=k(e.getLeftOffset())+"px"):0===e.pointer&&(e.pointer=h-2,f.style.left=k(e.getLeftOffset())+"px")),e.animated=!1,s=null,q(l),e.dots&&e.updateDots()):p(b)}var e=this,f=e.el,g=e.getLeftOffset(),h=e.slides.length;if(e.animated)return!1;e.animated=!0;var i=k(f.style.left),j=Math.abs(i-g);"right"===a&&(j=-j);var l,m=e.options.duration,n=1e3/60/m/4,o=d(r[e.options.easing],n),s=null;if(p&&q)l=p(b);else var t=setInterval(function(){null===s&&(s=new Date);var a=new Date-s,b=a/m;b>1&&(b=1);var d=o(b).toFixed(6);c(f,d,i,j),1==b&&(h>1&&(e.pointer===h-1?(e.pointer=1,f.style.left=k(e.getLeftOffset())+"px"):0===e.pointer&&(e.pointer=h-2,f.style.left=k(e.getLeftOffset())+"px")),clearInterval(t),s=null,e.animated=!1,e.dots&&e.updateDots())},25)}function c(a,b,c,d){var e=c+d*b;a.style.left=Math.ceil(e)+"px"}function d(a,b){return e(a[0],a[1],a[2],a[3],b)}function e(a,b,c,d,e){var f=function(b){var d=1-b;return 3*d*d*b*a+3*d*b*b*c+b*b*b},g=function(a){var c=1-a;return 3*c*c*a*b+3*c*a*a*d+a*a*a},h=function(b){var d=1-b;return 3*(2*(b-1)*b+d*d)*a+3*(-b*b*b+2*d*b)*c};return function(a){var b,c,d,i,j,k,l=a;for(d=l,k=0;8>k;k++){if(i=f(d)-l,Math.abs(i)<e)return g(d);if(j=h(d),Math.abs(j)<1e-6)break;d-=i/j}if(b=0,c=1,d=l,b>d)return g(b);if(d>c)return g(c);for(;c>b;){if(i=f(d),Math.abs(i-l)<e)return g(d);l>i?b=d:c=d,d=.5*(c-b)+b}return g(d)}}function f(a,b){var c=this;c.slides=[],c.count=0,c.navigation={left:null,right:null,dots:null},c.createSlideArray(b.selector,a),c.setupWrapper(a),c.count>1&&(c.cloningHeadAndTail(a),b.navigation&&(c.setupNavigation("left"),c.setupNavigation("right")),b.dots&&c.setupDots(b.dotsContainer)),c.setupElbaIslands()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return"undefined"!=typeof a&&a?a.offsetWidth:window.innerWidth||document.documentElement.clientWidth}function i(a){return"undefined"!=typeof a&&a?a.offsetHeight:window.innerHeight||document.documentElement.clientHeight}function j(a,b){if(a&&b)for(var c=a.length,d=0;c>d&&b(a[d],d)!==!1;d++);}function k(a){return a?parseInt(a,10):0}function l(a,b,c){a.attachEvent?a.attachEvent&&a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function m(a,b){for(;a&&a.parentNode;)if(a=a.parentNode,a.className===b)return a;return null}var n=window.classie,o=window.devicePixelRatio>1,p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame,q=window.cancelAnimationFrame||window.mozCancelAnimationFrame,r={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};return a.prototype.defaults={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",container:"elba-wrapper",src:"data-src",error:!1,success:!1,duration:1e3,easing:"easeInOutCubic",navigation:!0,dots:!0,dotsContainer:!1,slideshow:5e3},a.prototype.getContainerWidth=function(){var a=this;return h(a.container)},a.prototype.getContainerHeight=function(){var a=this;return i(a.container)},a.prototype.setSlidesWidth=function(){var a=this,b=a.getContainerWidth(),c=0;a.slides.forEach(function(a){c+=b,a.style.width=b+"px"}),a.el.style.width=c+"px"},a.prototype.setSource=function(){var a=this;a.source=0;var b=0,c=a.getContainerWidth();j(a.options.breakpoints,function(d){return d.width<=c&&Math.abs(c-d.width)<Math.abs(c-b)?(b=d.width,a.source=d.src,!0):void 0})},a.prototype.goTo=function(a){var c=this;if("string"==typeof a&&isNaN(a)){var d=c.slides.length;if("right"===a){if(c.pointer+1>=d)return!1;c.pointer++,b.call(c,"right")}else{if(c.pointer-1<0)return!1;c.pointer--,b.call(c,"left")}}else if(isNaN(a))c.el.style.left=k(c.getLeftOffset())+"px";else{var e=c.pointer;c.pointer=parseInt(a),c.pointer>e?b.call(c,"right"):b.call(c,"left")}},a.prototype.dotTo=function(a){var b=this;return parseInt(a)===b.pointer?!1:void b.goTo(a)},a.prototype.updateDots=function(){var a=this;a.dots.forEach(function(a){n.remove(a,"active-dot")});var b;b=a.pointer===a.slides.length-1?1:0===a.pointer?a.slides.length-2:a.pointer,n.add(a.dots[b],"active-dot")},a.prototype.getLeftOffset=function(){var a=this;return-(a.getContainerWidth()*a.pointer)},a.prototype.setImageSize=function(a){var b,c,d=this,e=a.naturalHeight/a.naturalWidth,f=d.getContainerWidth(),g=d.getContainerHeight(),h=g/f;h>=e?(a.height=b=Math.ceil(g),a.width=c=Math.ceil(g/e)):(a.height=b=Math.ceil(f*e),a.width=c=Math.ceil(f));var i=(f-c)/2,j=(g-b)/2;a.style.left=Math.ceil(i)+"px",a.style.top=Math.ceil(j)+"px"},a.prototype.startSlideshow=function(){var a=this;a.slides.length>1&&(a.slideshow&&clearInterval(a.slideshow),a.slideshow=setInterval(function(){n.has(a.slides[a.pointer+1],"elba-loaded")&&a.goTo("right")},a.options.slideshow))},a.prototype.clearSlideshow=function(){var a=this;a.slideshow&&clearInterval(a.slideshow)},f.prototype.createSlideArray=function(a,b){var c=this,d=b||document,e=d.querySelectorAll(a);c.count=e.length;for(var f=c.count;f--;c.slides.unshift(e[f]));},f.prototype.cloningHeadAndTail=function(a){var b=this;if(b.count>1){var c=b.slides[b.count-1].cloneNode(!0);a.insertBefore(c,a.firstChild),b.slides.unshift(c);var d=b.slides[1].cloneNode(!0);a.appendChild(d),b.slides.push(d),b.count+=2}},f.prototype.setupWrapper=function(a){var b=this;b.wrapper=document.createElement("div"),b.wrapper.className="elba-wrapper",b.wrapper.wrap(a)},f.prototype.setupNavigation=function(a){var b=this;b.navigation[a]=document.createElement("a"),b.navigation[a].className="elba-"+a+"-nav",b.navigation[a].innerHtml=a,b.wrapper.appendChild(b.navigation[a])},f.prototype.setupDots=function(a){var b=this;b.navigation.dots=[];var c;a?c=document.getElementById("dotsContainer"):(c=document.createElement("div"),c.className="elba-dots-ctr",b.wrapper.appendChild(c));for(var d=1;d<b.count-1;d++)b.navigation.dots[d]=document.createElement("a"),b.navigation.dots[d].className="elba-dot",c.appendChild(b.navigation.dots[d])},f.prototype.setupElbaIslands=function(){var a=this;a.slides.forEach(function(a){var b=document.createElement("img");b.className="elba-island",a.appendChild(b)})},f.prototype.getSlides=function(){return this.slides},f.prototype.getLeftNav=function(){return this.navigation.left},f.prototype.getRightNav=function(){return this.navigation.right},f.prototype.getDots=function(){return this.navigation.dots},a});