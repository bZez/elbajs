/*! elba - v0.5.0 - 2015-12-08
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2015 ; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a,b){var c={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",container:"elba-wrapper",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,dotsContainer:!1,slideshow:8e3,preload:1,swipeThreshold:60};this.settings=f.extend(c,b),this.el=a,this.slides=[],this.count=0,this.source=0,this.navigation={left:null,right:null,dots:null},this.elWidth=0,this.pointer=0,this.directionHint="right",this.resizeTimeout=null,this.animated=!1}{var b,c,d=0,e={};window.devicePixelRatio>1}"undefined"!=typeof document.hidden?(b="hidden",c="visibilitychange"):"undefined"!=typeof document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(b=" msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange");var f={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0}},g=document.createElement("div"),h=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==g.style[a[b]])return a[b];return!1}(),i=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==g.style[a[b]])return a[b];return!1}(),j=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,k=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,{goToNext:function(a){var b=100*(-a.pointer-1);a.pointer+=1,this.animate(a,b)},goToPrevious:function(a){var b=100*-(a.pointer-1);a.pointer-=1,this.animate(a,b)},animate:function(a,b){var c=this.getSlider(a);this.move(c,b)},move:function(a,b){j(function(){a.style[i]=h+" 0.8s",a.style[h]="translate3d("+b+"%,0,0)"})}}),l=Object.create(k);l.loadImages=function(){return"ciao"};var m=Object.create(l);m.build=function(a){var b=this.setLayout(a.el);this.setSlidesOffset(b),a.count=b.length,this.setupNavigation(a,"right"),this.setupNavigation(a,"left")},m.setLayout=function(a){var b=document.createDocumentFragment(),c=document.createElement("div");c.className="elba-viewport",b.appendChild(c);var d=document.createElement("div");d.className="elba-slider",c.appendChild(d);var e=f.getCloneNodes(a.children);if(e){e.unshift(e[e.length-1].cloneNode(!0)),e.push(e[1].cloneNode(!0));for(var g=0;g<e.length;g++)d.appendChild(e[g])}return f.removeChildren(a),a.appendChild(b),e},m.setSlidesOffset=function(a){for(var b=-100,c=0;c<a.length;c++)a[c].style.left=b+"%",b+=100},m.setupNavigation=function(a,b){var c="http://www.w3.org/2000/svg",d=document.createElement("a");if(d.className="elba-"+b+"-nav",d.setAttribute("data-elba-id",a.GUID),"left"===b){var e=document.createElementNS(c,"svg");e.setAttribute("viewBox","0 0 100 100");var f=document.createElementNS(c,"path");f.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),f.setAttribute("transform","translate(15,0)"),f.setAttribute("class","elba-svg-arrow"),e.appendChild(f),d.appendChild(e)}else{var g=document.createElementNS(c,"svg");g.setAttribute("viewBox","0 0 100 100");var h=document.createElementNS(c,"path");h.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),h.setAttribute("class","elba-svg-arrow"),h.setAttribute("transform","translate(85,100) rotate(180)"),g.appendChild(h),d.appendChild(g)}a.navigation[b]=d,a.el.appendChild(a.navigation[b])};var n=Object.create(m);n.bindEvents=function(){for(var a in e)if(e.hasOwnProperty(a)){var b=e[a];b.settings.navigation&&this.addNavigationEvents(b)}},n.addNavigationEvents=function(a){a.navigation.left.addEventListener("click",function(){p.previous(a.GUID)},!1),a.navigation.right.addEventListener("click",function(){p.next(a.GUID)},!1)};var o=Object.create(n),p=Object.create(o);return p.getInstance=function(a){return e[a]},p.getSlider=function(a){return a.el.querySelector(".elba-slider")},p.init=function(b,c){if("undefined"==typeof b)throw new Error;for(var g=f.makeArray(b),h=0;h<g.length;h++){d++;var i=new a(g[h],c);g[h].setAttribute("data-elba-id",d),e[d]=i,i.GUID=d,this.build(i)}return this.bindEvents(),this},p.next=function(b){var c=this.getInstance(b)||e;if(c instanceof a)this.goToNext(c);else for(var d in c)this.goToNext(c[d])},p.previous=function(b){var c=this.getInstance(b)||e;if(c instanceof a)this.goToPrevious(c);else for(var d in c)this.goToPrevious(c[d])},p});